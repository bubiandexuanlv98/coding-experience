# Shell脚本  
## 语法内容
1. 引号问题
   + 引号和不加引号的区别：引号能处理空格，不加引号不能搜索带空格的字符串，注意变量定义的时候，如果变量代表路径，那么最好加上引号
   + 单引号和双引号的区别：他们之间的区别仅体现在引号内有变量的情况，双引号中的变量会被展开，单引号中的变量不会被展开，会当成普通字符串处理  
2. 当命令行出现`>`的时候往往是由于命令没有结束，例如按下`'`键后回车，就会出现`>`这个时候再按一次`'`键后回车就退出来了
3. tar命令和mv命令一定要慎用，因为他们都是不可逆的操作，tar命令一定要注意如果有风险的话一定不能在当前目录下解压，要用`-C`参数指定解压文件夹。然后mv命令和rm命令如果一块使用的话一定要谨慎又谨慎！！！！！！！！
4. 注意shell脚本里面如果文件路径有问题，你麻痹它是不会把错误信息报出来的，所以如果看起来好像都没问题，一定要检查检查路径有没有错
5. date -d命令非常强大
6. if语句屁事特别多，一定要记住if语句最后要加上fi，不然错误都不知道在哪报的，然后if后面的`[]`，一定要是`[ asdfg ]`的形式，空格不能缺少


# linux命令
1. export命令：用于设置或显示环境变量。export 可新增，修改或删除环境变量，供后续执行的程序使用。export 的效力仅限于该次登陆操作。     
   + 注意事项：
    这个有点吓人，有一个使用的点一定要注意：`export PATH=/home/bin:$PATH` 冒号的作用是将前面的内容加入到环境变量中，如果不加这个冒号，那么就是把环境变量直接编程前面的值，以前的环境变量全部清除。注意环境变量的激发是有先后顺序的。如果`export $PATH:PATH=/home/bin`就会把`/home/bin`放到最后，如果前面的环境变量里面有重复可执行文件，则会覆盖`/home/bin`文件中的。

2. less命令
    + 注意事项：
    less里面进行搜索使用的是扩展正则表达式，vim里面搜索的时候用的是基础正则表达式，vim加上\v以后也可以用扩展正则，grep默认使用基础正则，但是加上-E参数可以使用扩展正则。还有一点要注意的是在less和vim里面的搜索都默认加上了双引号

3. 重定向命令  
   这个其实不用多讲，有一个说一下，就是追加模式重定向是`>>`而不是`>`(覆盖模式重定向)

4. apt-get 命令  
   + apt-get的源  
   apt-get的源存储在`/etc/apt/sources.list`里面，修改它的时候记得备份，而且记得使用`sudo`命令
   + `sudo apt-get upgrade`和`sudo apt-get update`的区别
   一定要记住upgrade要慎用，因为他会更新所有的包（可以指定包更新，但千万不要一次性全部更新，因为可能会出现不兼容）。`sudo apt-get update`就是从源中更新现有的软件包（不更新本机上的软件包）  
5. 常用查看系统，CPU信息的命令
   1. uname -a                 
      查看内核（linux还是windows）/操作系统发行版（ubuntu还是centos不包含版本）/CPU信息  
   1. head -n 1 /etc/issue     
      查看操作系统版本  
   2. cat /proc/cpuinfo       
      查看CPU信息  
   3. hostname               
      查看计算机名  
   4. dpkt -l                  
      这个仅限Debian系统。查看已安装的软件包，`-l`后面加包名就是查看这个包的状态  

6. 查看文件，目录大小，个数的命令
   1. wc命令  
      `-c`：查看Bytes数
      `-l`：查看行数
      `-w`：查看字数  
      不加参数直接`wc 文件`的结果是"行数 单词数 字节数"  

7. crontab 定时任务  
   定时任务的文件保存在`/var/spool/cron`下面，其余的可以参考这个博客：
   <https://blog.csdn.net/longgeaisisi/article/details/90477975>  
   我遇到的一个问题就是环境变量和shell的设置，这个设置在`/etc/crontab`里面，有的时候需要把里面的`/bin/sh`换成`/bin/bash`才行，因为sh命令执行不了source命令

9. cron表达式（这个是crontab和golang里面cron包通用的）
   ```
   */5 * * * * ?  每隔5秒执行一次
   0 */1 * * * ?  每隔1分钟执行一次
   0 0 23 * * ?  每天23点执行一次
   0 0 1 * * ?  每天凌晨1点执行一次：
   0 0 1 1 * ?  每月1号凌晨1点执行一次
   0 0 23 L * ?  每月最后一天23点执行一次
   0 0 1 ? * L  每周星期天凌晨1点实行一次
   0 26,29,33 * * * ?  在26分、29分、33分执行一次
   0 0 0,13,18,21 * * ? 每天的0点、13点、18点、21点都执行一次
   ```
   注意看那个每隔一分钟执行一次的，注意如果你想每隔某短时间执行一次，这个时间前面几个数量级的位置上都必须是0！！！

10. service 命令
   service 服务名 start 命令是查看某一服务名的状态的

12. source 命令
   1. 这个命令可以用`.`代替（`.`后面有空格）
   2. source命令和bash命令有区别的（这些以后会有更多理解）：  
      在用bash/sh/调用脚本的时候（或者那种直接执行的`./`，`sh`和`./`两个比较相似），**于是会创建一个和自己一模一样的shell进程来执行这个外部命令**。这个子进程中设置了自己的运行的环境变量。而在此时，**父进程的环境变量并没有改变**。子进程执行完毕，消亡。这时一直等待的父进程来继续接收命令。而在用source来执行脚本的时候，**不会创建子进程，而是在父进程中直接执行**。**所以当需要程序修改当前shell本身的环境变量的时候，使用source命令。**
   3. 内建命令和外部命令（这些以后会有更多理解）
      用`which`能找到的是外部命令，找不到的类似于`cd`，`source`这些都不行
   4. source命令用sh命令执行不了，但是用bash命令可以执行，因为source是bash的内置命令
 
13. which 和 whereis的区别
    这两个都是针对可执行文件的
    which 这条命令主要是用来查找系统***PATH目录下***的可执行文件。
    whereis 范围会广一点，这个并不是很清楚
14. sed 命令    
   5. -i参数  
      这个参数的意思就是sed脚本会直接修改文件，**其他参数都不会修改文件**  
   6. -e参数  
      这个参数后面直接跟sed脚本，即`''`里面的内容。  
   
   7. -n参数
      这个参数是只显示结果，不加-n可能会打印所有行（后面加p）

15.  fg命令/bg命令/jobs命令  
   `jobs`命令查看当前终端上的作业，作业相当于是？  
   `Ctrl-z`事实上是把前台作业扔到后台，同时暂停它。
   `fg jobs前面的作业号`是把暂停的作业调到前台，`fg`命令不加作业号的话，是先把`jobs`命令输出的作业中前面带加号的作业调到前台  
   `bg jobs前面的作业号`是把暂停的作业调到后台，后面同理。  
   注意：`fg`和`bg`命令中作业号加不加百分号`%`效果一样，但是`kill`命令中的作业号必须要加百分号`%`才能标识杀死的是被暂停的作业，不加百分号`%`杀的是进程号  

16. tar命令
    这个命令在有风险的情况下一定要用`-C`指定解压目录，不能在当前目录下解压

17. 文件通配符匹配  
   <https://www.cnblogs.com/lixuwu/p/7816335.html>
   1. *号的使用  
    这个符号一般是通配符。这里主要介绍一下它在ls列举中的作用。在我们常用的shell中`ls *`和`ls **`两个其实作用是一样的他们都是指递归一次即列举出本文件夹和子文件夹下的文件（有时候`**`才是这个含义，而`*`仅仅是列举本文件夹下的文件）。`ls **/*`这个命令可以递归列举本文件夹下所有的文件（包括子文件夹下，孙子文件夹，曾孙子文件夹....中的文件）  
14. 硬链接软链接的区别  
   <https://www.linuxprobe.com/soft-hard-links-comments.html>  

15. 查看磁盘空间命令    
   df：查看磁盘分区的大小，一般使用`df -lh`命令  
   du：查看磁盘使用情况，一般用于看一个文件夹有多大，常用命令`du -sh`查看当前文件夹大小（-s表示仅显示合计大小），或者`du -h 路径名`查看文件夹下所有文件的大小，或者`du -h 文件名`查看文件的大小
16. 查看某软件包的依赖：`ldd 软件包` 
17. 命令历史查看：history
    
18. 软链接的创建与删除
    + 软链接创建
    + 软链接删除
      ！！！一定要注意，删除一个目录的软链接时不能在软链接最后加上”/“，不然会删掉软链接指向的目录数据，除非你想通过软链接删掉目录：<https://blog.51cto.com/kusorz/1876315>



# vim 使用
1. 替换，选中行替换
<https://www.cnblogs.com/workingdiary/p/9066125.html>
2. 高亮，取消高亮，一次性取消高亮（前两个是永久的，最后一个是一次性的）
三者对应的命令是：`set hlsearch`，`set nohlsearch`，`noh`
   
# supervisor使用
1. 对于正常的supervisor，非supervisor-libev版本的supervisor，一定要记住有一个命令：`echo_supervisord_conf > /etc/supervisord.conf`，直接写`program`的conf文件肯定出问题，这样操作以后会有一个conf文件，conf文件的最后会让你`include`别的文件，也就是说你写的`program`文件既可以放在别的文件里面导入进去，也可以直接在生成的那个文件中改（会有地方让你改）。  
   + 第一个小问题，就是说然后用`echo_supervisord_conf >`后面的文件可以改，但是这种情况就必须指定`supervisord`的启动文件（`supervisord`命令自己会有固定的几个搜索目录，如果不在那些目录里就必须指定）。至此使用`supervisord`或者`supervisord -c xxx`就可以了。
   + 第二个小问题，`supervisord`启动以后应该就可以使用`supervisorctl`命令处理了，但是有时候可能会出现一个奇怪的现象就是系统提示找不到`sock`文件，这个时候一般就是程序出现问题导致`supervisord`退出了。

# 使用pip与conda安装python包
1. 首先pip用于安装第三方的python包，而conda可以用于安装python官方的包**不能用于安装第三方python包**
2. conda更新源，添加国内源，删除源，查看源  
   <https://www.jianshu.com/p/1a2b0976cd1a>  
   注意：这里有一个问题就是在conda的虚拟机里面的conda安装和原生conda安装两个独立的，通过conda list可以看出这两个软件库是不一样的。
3. 